##### USED PRIMARILY TO BUILD THE "UNITY FOUNDATION" IMAGE
#
# 
# Note a copy of the "astropy cache"

FROM lusee/lusee-night-refspec-cppyy:0.1

ARG reqs=requirements-foundation.txt

ADD .astropy /root/.astropy

WORKDIR /data

WORKDIR /user/luseepy

COPY docker/${reqs} requirements.txt
RUN pip install --upgrade pip
RUN pip install -r requirements.txt
#
# Important:
RUN pip install jupyterlab
#
RUN rm requirements.txt
#
COPY lusee lusee
COPY tests tests
#
ENV REFSPEC_PATH=/user/refspec
ENV PYTHONPATH=/user/luseepy:$REFSPEC_PATH/cppyy
ENV LUSEE_DRIVE_DIR=/data/
#
CMD ["bash"]
